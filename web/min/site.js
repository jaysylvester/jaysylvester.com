window.JAY={},JAY.immediate=function(){"use strict";return{init:{init:function(){document.querySelector("html").classList.add("js")}}.init}}(JAY),JAY.immediate.init();
JAY.global=function(){"use strict";var e={init:function(){e.header(),e.imageLoad()},header:function(){var e=document.querySelector("body"),t=0,n=document.querySelector("body > header");window.addEventListener("scroll",function(){!e.classList.contains("hidden-header")&&t>e.getBoundingClientRect().top&&Math.abs(e.getBoundingClientRect().top)>n.getBoundingClientRect().height?e.classList.add("hidden-header"):(e.getBoundingClientRect().top-10>=t||Math.abs(e.getBoundingClientRect().top)<=n.getBoundingClientRect().height)&&e.classList.remove("hidden-header"),t=e.getBoundingClientRect().top})},imageLoad:function(){var t=function(){const n=document.querySelectorAll("img[data-src]:not(.loaded)");n.length?n.forEach(function(t){let n;n=document.body.clientWidth<768?t.clientWidth?"w_"+t.clientWidth:"h_"+t.clientHeight:t.clientHeight?"h_"+t.clientHeight:"w_"+t.clientWidth,t.getBoundingClientRect().top<1.5*document.body.clientHeight&&(t.src=t.dataset.src.replace("[parameters]","f_auto,q_80,"+n+",dpr_"+Math.ceil(window.devicePixelRatio)+".0"),t.classList.add("loaded"),"FIGURE"===t.parentNode.parentNode.tagName&&e.imageZoom(t))}):window.removeEventListener("scroll",t)};t(),window.addEventListener("scroll",t)},imageZoom:function(e){var t=document.getElementById("mask")||document.createElement("div"),n=e.parentNode,i=document.createElement("img"),a=e.dataset.src.replace("[parameters]","f_auto,q_80,dpr_"+Math.ceil(window.devicePixelRatio)+".0");t.setAttribute("id","mask"),document.body.appendChild(t),n.addEventListener("click",function(e){function n(e){"Escape"===e.key&&o()}function o(){document.querySelector("html").classList.remove("mask-enabled"),t.classList.remove("enabled","loading"),t.innerHTML="",window.removeEventListener("keydown",n)}e.preventDefault(),t.innerHTML='<a id="mask-open-tab" href="'+a+'" target="_blank">Open this image in a new tab</a><a id="mask-close" href="#">Close</a>',document.querySelector("html").classList.add("mask-enabled"),t.classList.add("enabled"),i.setAttribute("src",a),t.append(i),setTimeout(function(){0===i.naturalWidth&&(t.classList.add("loading"),setTimeout(function(){t.classList.remove("loading")},1e4))},500),window.addEventListener("keydown",n),t.querySelector("#mask-close").addEventListener("click",function(e){e.preventDefault(),o()}),t.querySelector("#mask-open-tab").addEventListener("click",function(){o()})})}};return{init:e.init,imageZoom:e.imageZoom}}(JAY);
JAY.init=function(){"use strict";var t=document.getElementsByTagName("body")[0],e=t.getAttribute("data-controller"),i=t.getAttribute("data-action"),n=t.getAttribute("data-view");JAY.global.init(),JAY[e]&&(JAY[e].init(),JAY[e][i]&&"function"==typeof JAY[e][i]&&(JAY[e][i](),JAY[e][i][n]&&JAY[e][i][n]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&JAY.init()};
//# sourceMappingURL=../min/site.js.map
