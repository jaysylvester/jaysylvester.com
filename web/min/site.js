window.JAY={},JAY.immediate=function(){"use strict";return{init:{init:function(){document.querySelector("html").classList.add("js")}}.init}}(JAY),JAY.immediate.init();
JAY.global=function(){"use strict";const e={init:function(){e.fixedHeader(),e.imageLoad()},fixedHeader:function(){let e=document.querySelector("body"),t=0,n=document.querySelector("body > header");window.addEventListener("scroll",()=>{!e.classList.contains("hidden-header")&&t>e.getBoundingClientRect().top&&Math.abs(e.getBoundingClientRect().top)>n.getBoundingClientRect().height?(e.classList.add("hidden-header"),e.classList.remove("fixed-header")):(!e.classList.contains("fixed-header")&&e.getBoundingClientRect().top-10>=t||Math.abs(e.getBoundingClientRect().top)<=n.getBoundingClientRect().height)&&(e.classList.remove("hidden-header"),t<-110&&e.classList.add("fixed-header")),t=e.getBoundingClientRect().top,0===t&&e.classList.remove("fixed-header")})},imageLoad:function(){const t=function(){const n=document.querySelectorAll("img[data-src]:not(.loaded)"),i=document.body.clientWidth<768;n.length?n.forEach((function(t){let n;n=i?t.clientWidth?"w_"+t.clientWidth:"h_"+t.clientHeight:t.clientHeight?"h_"+t.clientHeight:"w_"+t.clientWidth,t.getBoundingClientRect().top<1.5*document.body.clientHeight&&(t.src=t.dataset.src.replace("[parameters]","f_auto,q_80,"+n+",dpr_"+Math.ceil(window.devicePixelRatio)+".0"),t.classList.add("loaded"),i||e.imageZoom(t))})):window.removeEventListener("scroll",t)};t(),window.addEventListener("scroll",t)},imageZoom:function(e){let t=document.getElementById("mask")||document.createElement("div"),n=e.parentNode,i=document.createElement("img"),a=e.dataset.src.replace("[parameters]","f_auto,q_80,dpr_"+Math.ceil(window.devicePixelRatio)+".0"),r=function(){setTimeout((function(){0===i.naturalWidth&&(t.classList.add("loading"),setTimeout((function(){t.classList.remove("loading")}),1e4))}),500)};t.setAttribute("id","mask"),document.body.appendChild(t),n.addEventListener("click",(function(o){o.preventDefault();let d=e.parentNode.parentNode.parentNode.parentNode,c=[...d.querySelector("section").children].indexOf(n.parentNode),s=!1;function l(e){"Escape"===e.key&&u()}function u(){document.querySelector("html").classList.remove("mask-enabled"),t.classList.remove("enabled","loading","screens"),t.innerHTML="",window.removeEventListener("keydown",l)}t.innerHTML='<h1>Image 1 of 1</h1><a id="mask-open-tab" href="'+a+'" target="_blank">Open this image in a new tab</a><a id="mask-close" href="#">Close</a>',"group"===d.getAttribute("role")&&(t.querySelector("h1").innerHTML='Image <span class="current-image">1</span> of <span class="total-images">1</span>',t.innerHTML+='<nav id="screen-nav"><ul></ul></nav>',s=t.querySelector("#screen-nav"),d.querySelectorAll("figure").forEach((function(e,n){s.querySelector("ul").innerHTML+="<li"+(n===c?' class="selected"':"")+'><a href="'+e.querySelector("img").dataset.src.replace("[parameters]","f_auto,q_80,dpr_"+Math.ceil(window.devicePixelRatio)+".0")+'">'+e.querySelector("img").getAttribute("alt")+"</a></li>",t.querySelector("span.current-image").innerHTML=c+1,t.querySelector("span.total-images").innerHTML=n+1,s.addEventListener("click",(function(e){e.preventDefault(),"A"===e.target.tagName&&(s.querySelectorAll("li").forEach((function(e){e.classList.remove("selected")})),t.querySelector("span.current-image").innerHTML=[...e.target.parentNode.parentNode.children].indexOf(e.target.parentNode)+1,e.target.parentNode.classList.add("selected"),t.querySelector("#mask-open-tab").setAttribute("href",e.target.href),r(),i.setAttribute("src","/images/placeholder-zoom.svg"),i.setAttribute("src",e.target.href))}))}))),document.querySelector("html").classList.add("mask-enabled"),t.classList.add("enabled"),i.setAttribute("src",a),s?(t.classList.add("screens"),t.insertBefore(i,s)):t.append(i),r(),window.addEventListener("keydown",l),t.querySelector("#mask-close").addEventListener("click",(function(e){e.preventDefault(),u()}))}))}};return{init:e.init,imageZoom:e.imageZoom}}(JAY);
JAY.init=function(){"use strict";const t=document.getElementsByTagName("body")[0],e=t.getAttribute("data-controller"),i=t.getAttribute("data-action"),n=t.getAttribute("data-view");JAY.global.init(),JAY[e]&&(JAY[e].init(),JAY[e][i]&&"function"==typeof JAY[e][i]&&(JAY[e][i](),JAY[e][i][n]&&JAY[e][i][n]()))},document.onreadystatechange=function(){"use strict";"interactive"===document.readyState&&JAY.init()};
//# sourceMappingURL=../min/site.js.map
