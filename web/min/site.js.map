{"version":3,"sources":["immediate.js","global.js","index.js","init.js"],"names":["window","JAY","immediate","init","document","querySelector","classList","add","global","methods","mobile","body","clientWidth","imageLoad","images","querySelectorAll","load","addEventListener","capture","passive","forEach","image","getBoundingClientRect","top","innerHeight","src","dataset","replace","clientHeight","Math","ceil","devicePixelRatio","parentNode","tagName","contains","imageZoom","length","removeEventListener","mask","getElementById","createElement","anchor","img","loading","setTimeout","naturalWidth","remove","setAttribute","appendChild","e","preventDefault","figureGroup","figureIndex","children","indexOf","screenNav","escape","key","close","innerHTML","getAttribute","figure","index","target","href","insertBefore","append","carousel","section","quotes","dots","current","timer","dotsNav","show","quote","i","toggle","dot","startTimer","clearInterval","setInterval","push","insertAdjacentElement","getElementsByTagName","controller","action","view","onreadystatechange","readyState"],"mappings":"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","file":"site.js","sourcesContent":["window.JAY = {}\n\nJAY.immediate = ( function () {\n  'use strict'\n\n  const methods = {\n    init: function () {\n      document.querySelector('html').classList.add('js')\n    }\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(JAY)\n\nJAY.immediate.init()\n","JAY.global = ( function () {\n  'use strict'\n\n  const methods = {\n\n    init: function () {\n      let mobile = document.body.clientWidth < 768\n      methods.imageLoad(mobile)\n    },\n\n    // Lazy load images\n    imageLoad: function (mobile) {\n      let images = document.querySelectorAll('img[data-src]:not(.loaded)')\n\n      const load = function () {\n        window.addEventListener('scroll', load, { capture: true, passive: true})\n        images.forEach( function (image) {\n          // If the image is within 2 viewport heights of the current offset, load it\n          if ( image.getBoundingClientRect().top < ( window.innerHeight * 2 ) ) {\n            image.src = image.dataset.src.replace('[parameters]', 'f_auto,q_80,' + ( image.clientHeight ? 'h_' + image.clientHeight : 'w_' + image.clientWidth ) + ',dpr_' + Math.ceil(window.devicePixelRatio) + '.0')\n            image.classList.add('loaded')\n            if ( !mobile && image.parentNode.tagName === 'A' && !image.parentNode.parentNode.classList.contains('devices') ) {\n              methods.imageZoom(image)\n            }\n            images = document.querySelectorAll('img[data-src]:not(.loaded)')\n            if ( !images.length ) {\n              window.removeEventListener('scroll', load, { capture: true, passive: true})\n            }\n          }\n        })\n      }\n\n      if ( images.length ) {\n        load()\n      }\n    },\n\n    imageZoom: function (image) {\n      let mask    = document.getElementById('mask') || document.createElement('div'),\n          anchor  = image.parentNode,\n          img     = document.createElement('img'),\n          src     = image.dataset.src.replace('[parameters]', 'f_auto,w_1500,q_80,dpr_' + Math.ceil(window.devicePixelRatio) + '.0'),\n          loading = function () {\n            // Add the loading spinner after a brief delay, otherwise it pops in and out and looks bad\n            setTimeout( function () {\n              if ( img.naturalWidth === 0 ) {\n                mask.classList.add('loading')\n\n                setTimeout( function () {\n                  mask.classList.remove('loading')\n                }, 10000)\n              }\n            }, 500)\n          }\n\n      mask.setAttribute('id', 'mask')\n      document.body.appendChild(mask)\n\n      anchor.addEventListener('click', function (e) {\n        e.preventDefault()\n        let figureGroup = image.parentNode.parentNode.parentNode.parentNode,\n            figureIndex = [...figureGroup.querySelector('section').children].indexOf(anchor.parentNode),\n            screenNav = false\n\n        mask.innerHTML = '<h1>Image 1 of 1</h1><a id=\"mask-open-tab\" href=\"' + src + '\" target=\"_blank\">Open this image in a new tab</a><a id=\"mask-close\" href=\"#\">Close</a>'\n\n        // Create navigation if it's a group of images\n        if ( figureGroup.getAttribute('role') === 'group' ) {\n          mask.querySelector('h1').innerHTML = 'Image <span class=\"current-image\">1</span> of <span class=\"total-images\">1</span>'\n          mask.innerHTML += '<nav id=\"screen-nav\"><ul></ul></nav>'\n          screenNav = mask.querySelector('#screen-nav')\n          figureGroup.querySelectorAll('figure').forEach( function (figure, index) {\n            screenNav.querySelector('ul').innerHTML += '<li' + ( index === figureIndex ? ' class=\"selected\"' : '' ) + '><a href=\"' + figure.querySelector('img').dataset.src.replace('[parameters]', 'f_auto,q_80,dpr_' + Math.ceil(window.devicePixelRatio) + '.0') + '\">' + figure.querySelector('img').getAttribute('alt') + '</a></li>'\n            mask.querySelector('span.current-image').innerHTML = figureIndex + 1\n            mask.querySelector('span.total-images').innerHTML = index + 1\n            screenNav.addEventListener('click', function (e) {\n              e.preventDefault()\n              if ( e.target.tagName === 'A' ) {\n                screenNav.querySelectorAll('li').forEach( function (anchor) {\n                  anchor.classList.remove('selected')\n                })\n                mask.querySelector('span.current-image').innerHTML = [...e.target.parentNode.parentNode.children].indexOf(e.target.parentNode) + 1\n                e.target.parentNode.classList.add('selected')\n                mask.querySelector('#mask-open-tab').setAttribute('href', e.target.href)\n                loading()\n                img.setAttribute('src', '/images/placeholder-zoom.svg')\n                img.setAttribute('src', e.target.href)\n              }\n            })\n          })\n        }\n\n        document.querySelector('html').classList.add('mask-enabled')\n        mask.classList.add('enabled')\n        img.setAttribute('src', src)\n        if ( screenNav ) {\n          mask.classList.add('screens')\n          mask.insertBefore(img, screenNav)\n        } else {\n          mask.append(img)\n        }\n        loading()\n\n        window.addEventListener('keydown', escape)\n        mask.querySelector('#mask-close').addEventListener('click', function (e) {\n          e.preventDefault()\n          close()\n        })\n\n        function escape(e) {\n          if ( e.key === 'Escape' ) {\n            close()\n          }\n        }\n\n        function close() {\n          document.querySelector('html').classList.remove('mask-enabled')\n          mask.classList.remove('enabled', 'loading', 'screens')\n          mask.innerHTML = ''\n          window.removeEventListener('keydown', escape)\n        }\n      })\n    }\n  }\n\n  //  Public methods\n  return {\n    init:       methods.init,\n    imageZoom:  methods.imageZoom\n  }\n\n}(JAY))\n","JAY.index = ( function () {\n  'use strict'\n\n  const methods = {\n\n    init: function () {\n      methods.carousel()\n    },\n\n    carousel: function () {\n      let section = document.querySelector('section.quotes'),\n          quotes  = document.querySelectorAll('section.quotes blockquote'),\n          dots    = [],\n          current = 0,\n          timer   = null,\n          dotsNav = document.createElement('nav')\n\n      if ( !section || quotes.length <= 1 ) return\n\n      dotsNav.classList.add('carousel-dots')\n      section.classList.add('carousel')\n      quotes[0].classList.add('active')\n\n      quotes.forEach( function (quote, index) {\n        let dot = document.createElement('button')\n        dot.setAttribute('type', 'button')\n        dot.setAttribute('aria-label', 'Quote ' + ( index + 1 ) + ' of ' + quotes.length)\n        if ( index === 0 ) dot.classList.add('active')\n        dot.addEventListener('click', function () {\n          current = index\n          show(current)\n          startTimer()\n        })\n        dotsNav.appendChild(dot)\n        dots.push(dot)\n      })\n\n      section.insertAdjacentElement('afterend', dotsNav)\n\n      function show(index) {\n        quotes.forEach( function (quote, i) {\n          quote.classList.toggle('active', i === index)\n        })\n        dots.forEach( function (dot, i) {\n          dot.classList.toggle('active', i === index)\n        })\n      }\n\n      function startTimer() {\n        clearInterval(timer)\n        timer = setInterval( function () {\n          current = ( current + 1 ) % quotes.length\n          show(current)\n        }, 10000)\n      }\n\n      section.addEventListener('mouseenter', function () {\n        clearInterval(timer)\n      })\n\n      section.addEventListener('mouseleave', function () {\n        startTimer()\n      })\n\n      startTimer()\n    }\n\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n}(JAY))\n","JAY.init = function () {\n  'use strict'\n\n  const body       = document.getElementsByTagName('body')[0],\n        controller = body.getAttribute('data-controller'),\n        action     = body.getAttribute('data-action'),\n        view       = body.getAttribute('data-view')\n\n  JAY.global.init()\n\n  if ( JAY[controller] ) {\n    JAY[controller].init()\n\n    if ( JAY[controller][action] && typeof JAY[controller][action] === 'function' ) {\n      JAY[controller][action]()\n\n      if ( JAY[controller][action][view] ) {\n        JAY[controller][action][view]()\n      }\n    }\n  }\n}\n\ndocument.onreadystatechange = function () {\n  'use strict'\n\n  if ( document.readyState === 'interactive' ) {\n    JAY.init()\n  }\n}\n"]}