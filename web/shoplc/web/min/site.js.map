{"version":3,"sources":["immediate.js","global.js","init.js"],"names":["window","SLC","immediate","init","document","querySelector","classList","add","global","methods","header","imageLoad","body","clientWidth","menu","trigger","position","bodyOffset","addEventListener","contains","getBoundingClientRect","top","Math","abs","height","remove","load","images","querySelectorAll","length","forEach","image","clientHeight","src","dataset","removeEventListener","args","source","cloneNode","item","removeChild","menuShadow","createElement","appendChild","className","keepClass","setTimeout","parentNode","imageZoom","controller","getAttribute","action","view","onreadystatechange","readyState"],"mappings":"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","file":"../js/site.js","sourcesContent":["window.SLC = {}\n\nSLC.immediate = ( function () {\n  'use strict'\n\n  var methods = {\n    init: function () {\n      document.querySelector('html').classList.add('js')\n    }\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(SLC)\n\nSLC.immediate.init()\n","SLC.global = ( function () {\n  'use strict'\n\n  var methods = {\n\n    init: function () {\n      methods.header()\n      methods.imageLoad()\n\n      if ( document.body.clientWidth < 960 ) {\n        methods.menu({\n          menu: 'main nav.filters',\n          trigger: 'main nav.filters > a',\n          position: 'bottom'\n        })\n        methods.menu({\n          menu: 'main nav.sort',\n          trigger: 'main nav.sort > a',\n          position: 'bottom'\n        })\n      }\n    },\n\n    header: function () {\n      var body        = document.querySelector('body'),\n          bodyOffset  = 0,\n          header      = document.querySelector('body > header')\n\n      window.addEventListener('scroll', function () {\n        if ( !body.classList.contains('hidden-header') && bodyOffset > body.getBoundingClientRect().top && Math.abs(body.getBoundingClientRect().top) > header.getBoundingClientRect().height ) {\n          body.classList.add('hidden-header')\n        // The minus 10 pixels is to keep the header from popping in with only slight movements (happens frequently when using touchscreens and touch input devices)\n        // The second half of the statement deals with Safari's bounceback when you scroll past the top of the page\n        } else if ( body.getBoundingClientRect().top - 10 >= bodyOffset || Math.abs(body.getBoundingClientRect().top) <= header.getBoundingClientRect().height ) {\n          body.classList.remove('hidden-header')\n        }\n\n        bodyOffset = body.getBoundingClientRect().top\n        if ( bodyOffset < -60 ) {\n          body.classList.add('partial-header')\n        } else {\n          body.classList.remove('partial-header')\n        }\n      })\n    },\n\n    imageLoad: function () {\n      var load = function () {\n            const images = document.querySelectorAll('img[data-src]:not(.loaded)')\n            \n            if ( images.length ) {\n              images.forEach( function (image) {\n                // If the image is within 1.5 viewport heights of the current offset, load it\n                if ( image.getBoundingClientRect().top < ( document.body.clientHeight * 1.5 ) ) {\n                  image.src = image.dataset.src\n                  image.classList.add('loaded')\n                }\n              })\n            } else {\n              window.removeEventListener('scroll', load)\n            }\n          }\n      \n      load()\n\n      window.addEventListener('scroll', load)\n    },\n\n    menu: function (args) {\n      var body = document.querySelector('body'),\n          source = document.querySelector(args.menu),\n          menu = source.cloneNode(true),\n          trigger = document.querySelector(args.trigger)\n\n      source.querySelectorAll('section').forEach(function (item) {\n        source.removeChild(item)\n      })\n\n      trigger.addEventListener('click', function () {\n        var menuShadow = document.createElement('div')\n\n        body.appendChild(menu)\n        menuShadow.className = 'menu-shadow'\n        body.appendChild(menuShadow)\n\n        if ( args.keepClass === false ) {\n          menu.className = 'slide-menu ' + args.position\n        } else {\n          menu.className += ' slide-menu ' + args.position\n        }\n\n        if ( body.classList.contains('menu-open') ) {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n          }, 200)\n        } else {\n          body.classList.add('menu-opening')\n          setTimeout( function () {\n            body.classList.remove('menu-opening')\n            body.classList.add('menu-open')\n            menu.classList.add('open')\n          }, 200)\n        }\n\n        menuShadow.addEventListener('click', function () {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n            body.removeChild(menuShadow)\n            if ( menu.parentNode !== null ) {\n              body.removeChild(menu)\n            }\n          }, 200)\n        }, false)\n      }, false)\n    }\n  }\n\n  //  Public methods\n  return {\n    // ajaxFormBinding: methods.ajaxFormBinding,\n    init:       methods.init,\n    imageZoom:  methods.imageZoom\n  }\n\n}(SLC))\n","SLC.init = function () {\n  'use strict'\n\n  var body        = document.body,\n      controller  = body.getAttribute('data-controller'),\n      action      = body.getAttribute('data-action'),\n      view        = body.getAttribute('data-view')\n\n  SLC.global.init()\n\n  if ( SLC[controller] ) {\n    SLC[controller].init()\n\n    if ( SLC[controller][action] && typeof SLC[controller][action] === 'function' ) {\n      SLC[controller][action]()\n\n      if ( SLC[controller][action][view] ) {\n        SLC[controller][action][view]()\n      }\n    }\n  }\n}\n\ndocument.onreadystatechange = function () {\n  'use strict'\n\n  if ( document.readyState === 'interactive' ) {\n    SLC.init()\n  }\n}\n"]}