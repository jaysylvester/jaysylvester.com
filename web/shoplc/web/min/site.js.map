{"version":3,"sources":["immediate.js","global.js","init.js"],"names":["window","SLC","immediate","init","document","querySelector","classList","add","global","methods","header","imageLoad","menu","trigger","position","body","bodyOffset","addEventListener","contains","getBoundingClientRect","top","Math","abs","height","remove","load","images","querySelectorAll","length","forEach","image","clientHeight","src","dataset","removeEventListener","args","source","cloneNode","item","removeChild","menuShadow","createElement","appendChild","className","keepClass","setTimeout","parentNode","imageZoom","controller","getAttribute","action","view","onreadystatechange","readyState"],"mappings":"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","file":"../js/site.js","sourcesContent":["window.SLC = {}\n\nSLC.immediate = ( function () {\n  'use strict'\n\n  var methods = {\n    init: function () {\n      document.querySelector('html').classList.add('js')\n    }\n  }\n\n  //  Public methods\n  return {\n    init: methods.init\n  }\n\n})(SLC)\n\nSLC.immediate.init()\n","SLC.global = ( function () {\n  'use strict'\n\n  var methods = {\n\n    init: function () {\n      methods.header()\n      methods.imageLoad()\n      methods.menu({\n        menu: 'main nav.filters',\n        trigger: 'main nav.filters > a',\n        position: 'bottom'\n      })\n      methods.menu({\n        menu: 'main nav.sort',\n        trigger: 'main nav.sort > a',\n        position: 'bottom'\n      })\n    },\n\n    header: function () {\n      var body        = document.querySelector('body'),\n          bodyOffset  = 0,\n          header      = document.querySelector('body > header')\n\n      window.addEventListener('scroll', function () {\n        if ( !body.classList.contains('hidden-header') && bodyOffset > body.getBoundingClientRect().top && Math.abs(body.getBoundingClientRect().top) > header.getBoundingClientRect().height ) {\n          body.classList.add('hidden-header')\n        // The minus 10 pixels is to keep the header from popping in with only slight movements (happens frequently when using touchscreens and touch input devices)\n        // The second half of the statement deals with Safari's bounceback when you scroll past the top of the page\n        } else if ( body.getBoundingClientRect().top - 10 >= bodyOffset || Math.abs(body.getBoundingClientRect().top) <= header.getBoundingClientRect().height ) {\n          body.classList.remove('hidden-header')\n        }\n\n        bodyOffset = body.getBoundingClientRect().top\n        if ( bodyOffset < -60 ) {\n          body.classList.add('partial-header')\n        } else {\n          body.classList.remove('partial-header')\n        }\n      })\n    },\n\n    imageLoad: function () {\n      var load = function () {\n            const images = document.querySelectorAll('img[data-src]:not(.loaded)')\n            \n            if ( images.length ) {\n              images.forEach( function (image) {\n                // If the image is within 1.5 viewport heights of the current offset, load it\n                if ( image.getBoundingClientRect().top < ( document.body.clientHeight * 1.5 ) ) {\n                  image.src = image.dataset.src\n                  image.classList.add('loaded')\n                }\n              })\n            } else {\n              window.removeEventListener('scroll', load)\n            }\n          }\n      \n      load()\n\n      window.addEventListener('scroll', load)\n    },\n\n    menu: function (args) {\n      var body = document.querySelector('body'),\n          source = document.querySelector(args.menu),\n          menu = source.cloneNode(true),\n          trigger = document.querySelector(args.trigger)\n\n      source.querySelectorAll('section').forEach(function (item) {\n        source.removeChild(item)\n      })\n\n      trigger.addEventListener('click', function () {\n        var menuShadow = document.createElement('div')\n\n        body.appendChild(menu)\n        menuShadow.className = 'menu-shadow'\n        body.appendChild(menuShadow)\n\n        if ( args.keepClass === false ) {\n          menu.className = 'slide-menu ' + args.position\n        } else {\n          menu.className += ' slide-menu ' + args.position\n        }\n\n        if ( body.classList.contains('menu-open') ) {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n          }, 200)\n        } else {\n          body.classList.add('menu-opening')\n          setTimeout( function () {\n            body.classList.remove('menu-opening')\n            body.classList.add('menu-open')\n            menu.classList.add('open')\n          }, 200)\n        }\n\n        menuShadow.addEventListener('click', function () {\n          body.classList.remove('menu-open')\n          menu.classList.remove('open')\n          body.classList.add('menu-closing')\n          setTimeout( function () {\n            body.classList.remove('menu-closing')\n            body.removeChild(menuShadow)\n            if ( menu.parentNode !== null ) {\n              body.removeChild(menu)\n            }\n          }, 200)\n        }, false)\n      }, false)\n    }\n  }\n\n  //  Public methods\n  return {\n    // ajaxFormBinding: methods.ajaxFormBinding,\n    init:       methods.init,\n    imageZoom:  methods.imageZoom\n  }\n\n}(SLC))\n","SLC.init = function () {\n  'use strict'\n\n  var body        = document.body,\n      controller  = body.getAttribute('data-controller'),\n      action      = body.getAttribute('data-action'),\n      view        = body.getAttribute('data-view')\n\n  SLC.global.init()\n\n  if ( SLC[controller] ) {\n    SLC[controller].init()\n\n    if ( SLC[controller][action] && typeof SLC[controller][action] === 'function' ) {\n      SLC[controller][action]()\n\n      if ( SLC[controller][action][view] ) {\n        SLC[controller][action][view]()\n      }\n    }\n  }\n}\n\ndocument.onreadystatechange = function () {\n  'use strict'\n\n  if ( document.readyState === 'interactive' ) {\n    SLC.init()\n  }\n}\n"]}